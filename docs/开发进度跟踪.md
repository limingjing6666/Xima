# Xima 开发进度跟踪

## 当前状态：单体应用开发完成 ✅

---

## 已完成功能

### Phase 1: 基础设施 ✅
- [x] Spring Boot 项目搭建
- [x] MyBatis + MySQL 集成
- [x] Spring Security + JWT 认证
- [x] 全局异常处理
- [x] 统一响应格式
- [x] Swagger API 文档

### Phase 2: 用户系统 ✅
- [x] 用户注册（邮箱验证码）
- [x] 用户登录（JWT Token）
- [x] 个人信息管理
- [x] 头像上传
- [x] 聊天背景设置

### Phase 3: 好友系统 ✅
- [x] 用户搜索
- [x] 发送好友请求
- [x] 接受/拒绝请求
- [x] 好友列表
- [x] 好友备注
- [x] 删除好友

### Phase 4: 私聊功能 ✅
- [x] WebSocket 实时通信
- [x] 消息发送/接收
- [x] 离线消息
- [x] 消息已读状态
- [x] 消息撤回
- [x] 图片/文件发送

### Phase 5: 群聊功能 ✅
- [x] 创建群组
- [x] 邀请成员
- [x] 群成员管理
- [x] 群消息
- [x] 群公告
- [x] 退出/解散群

### Phase 6: 测试 ✅
- [x] 单元测试 (119个)
- [x] 集成测试框架
- [x] 性能测试框架

### Phase 7: 部署 ✅
- [x] Docker 容器化
- [x] Docker Compose 编排
- [x] CentOS 7 部署脚本
- [x] 数据备份脚本

---

## API 接口列表

### 认证 `/api/v1/auth`
| 方法 | 路径 | 说明 |
|------|------|------|
| POST | /register | 用户注册 |
| POST | /login | 用户登录 |
| POST | /send-code | 发送验证码 |

### 用户 `/api/v1/users`
| 方法 | 路径 | 说明 |
|------|------|------|
| GET | /me | 获取当前用户 |
| PUT | /me | 更新用户信息 |
| POST | /me/avatar | 上传头像 |
| POST | /me/background | 上传背景 |
| GET | /search | 搜索用户 |
| GET | /{id} | 获取用户信息 |

### 好友 `/api/v1/friends`
| 方法 | 路径 | 说明 |
|------|------|------|
| GET | / | 好友列表 |
| POST | /request | 发送请求 |
| POST | /request/{id}/accept | 接受请求 |
| POST | /request/{id}/reject | 拒绝请求 |
| DELETE | /{friendId} | 删除好友 |
| GET | /requests/pending | 待处理请求 |

### 消息 `/api/v1/messages`
| 方法 | 路径 | 说明 |
|------|------|------|
| GET | /history/{friendId} | 聊天历史 |
| GET | /offline | 离线消息 |
| POST | /{id}/read | 标记已读 |
| POST | /{id}/recall | 撤回消息 |

### 群组 `/api/v1/groups`
| 方法 | 路径 | 说明 |
|------|------|------|
| POST | / | 创建群组 |
| GET | / | 我的群组 |
| GET | /{id} | 群组详情 |
| PUT | /{id} | 更新群组 |
| DELETE | /{id} | 解散群组 |
| POST | /{id}/members | 邀请成员 |
| DELETE | /{id}/members/{userId} | 移除成员 |
| POST | /{id}/leave | 退出群组 |

### WebSocket `/ws/chat`
- 连接: `ws://host/api/ws/chat?token=xxx`

---

## 下一步计划

- [ ] 微服务拆分
- [ ] Kubernetes 部署
- [ ] 消息队列集成
- [ ] 分布式缓存
- [ ] 日志收集系统
